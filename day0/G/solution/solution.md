### 【$n \leq 5$】

暴力枚举每条边是否变黑  
时间复杂度：$O(2^{n(n-1)}n^2)$，空间复杂度：$O(n^2)$

### 【$n \leq 8$】

枚举每个点的最短路长度，假设某个点的最短路长度为$x$。  
那么连向这个点的边有一些限制：

* 最短路$\leq x-2$的点不能向这个点连边
* 最短路$=x-1$的点可以向这个点连边，且最短路$=x-1$的点集至少向这个点连出一条边
* 最短路$\geq x$的点可以向这个点连边

按照这些限制计算概率即可  
时间复杂度：不超过$O(n^n)$，空间复杂度：$O(n^2)$

### 【$n \leq 12$】

每个点的限制中将所有点按最短路长度分成了$3$类  
考虑状压$DP$记录每一类中有哪些点  
记$f[s][t][i]=$最短路$\leq i$的点集为$s$，最短路$=i$的点集为$t$，有多大的概率能形成这样的子图  
转移时枚举最短路为$i+1$的点集$s'$，经过一些预处理，枚举$s'$后可以$O(1)$转移  
时间复杂度：$O(4^nn)$，空间复杂度：$O(3^nn)$